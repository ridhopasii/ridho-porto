<%- include('partials/header') %>

    <!-- Hero Section -->
    <section id="beranda" class="min-h-screen flex items-center pt-20 relative overflow-hidden">
        <!-- Animated Background -->
        <div class="absolute inset-0 z-0 pointer-events-none">
            <div
                class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-accent/20 rounded-full blur-[120px] animate-blob mix-blend-screen">
            </div>
            <div
                class="absolute top-[20%] right-[-10%] w-[35%] h-[35%] bg-purple-500/20 rounded-full blur-[120px] animate-blob animation-delay-2000 mix-blend-screen">
            </div>
            <div
                class="absolute bottom-[-10%] left-[20%] w-[30%] h-[30%] bg-teal-500/20 rounded-full blur-[120px] animate-blob animation-delay-4000 mix-blend-screen">
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8 w-full relative z-10 py-16 lg:py-0">
            <div class="flex flex-col lg:grid lg:grid-cols-2 gap-10 lg:gap-16 items-center">

                <!-- Right Content (Profile Card) — tampil di atas di mobile -->
                <div class="order-1 lg:order-2 flex justify-center w-full" data-aos="fade-left">
                    <div class="relative group"
                        style="padding-bottom: 3rem; padding-left: 0.5rem; padding-right: 0.5rem;">

                        <!-- Glow ring -->
                        <div
                            class="absolute -inset-2 rounded-[2.5rem] bg-gradient-to-br from-teal-400 via-purple-500 to-blue-500 opacity-20 blur-2xl group-hover:opacity-50 transition-all duration-700">
                        </div>

                        <!-- Main image card -->
                        <div class="relative rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl bg-gradient-to-br from-[#0f0f0f] to-[#1a1a2e] group-hover:scale-[1.015] group-hover:-rotate-[0.5deg] transition-all duration-500"
                            style="width: min(300px, 80vw); max-width: 380px;">

                            <!-- Shimmer on hover -->
                            <div
                                class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none z-20">
                            </div>

                            <!-- Hero image dengan aspect ratio tetap -->
                            <div class="relative" style="aspect-ratio: 3/4; overflow: hidden;">
                                <img src="<%= profile?.heroImage || '/images/asset_1.jpg' %>"
                                    alt="<%= profile?.fullName %>" class="w-full h-full object-cover object-top"
                                    loading="lazy" decoding="async">

                                <!-- Top gradient overlay -->
                                <div
                                    class="absolute top-0 left-0 right-0 h-36 bg-gradient-to-b from-black/70 to-transparent z-10">
                                </div>
                                <!-- Bottom gradient overlay -->
                                <div
                                    class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-black/80 to-transparent z-10">
                                </div>

                                <!-- Name overlay -->
                                <div class="absolute top-4 left-4 right-4 z-20">
                                    <h3
                                        class="font-outfit font-bold text-lg sm:text-xl text-white drop-shadow-lg leading-tight">
                                        <%= profile?.fullName %>
                                    </h3>
                                    <p class="text-teal-400 text-xs sm:text-sm font-medium mt-1 drop-shadow">
                                        <%= profile?.title %>
                                    </p>
                                </div>

                                <!-- Available badge -->
                                <div class="absolute top-4 right-4 z-20">
                                    <span
                                        class="flex items-center gap-1.5 bg-black/70 backdrop-blur-md border border-teal-500/30 rounded-full px-2.5 py-1 text-[10px] sm:text-xs font-bold text-teal-300 shadow-lg">
                                        <span
                                            class="w-1.5 h-1.5 rounded-full bg-teal-400 animate-pulse flex-shrink-0"></span>
                                        Available
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Floating info card di bawah -->
                        <div class="absolute bottom-0 left-0 right-0 px-2 z-30">
                            <div
                                class="bg-[#0f0f0f]/95 backdrop-blur-xl rounded-2xl px-3 py-2.5 sm:px-4 sm:py-3 border border-white/10 shadow-2xl flex items-center justify-between gap-2">
                                <div class="flex items-center gap-2.5 min-w-0">
                                    <div class="relative flex-shrink-0">
                                        <img src="<%= profile?.avatarUrl || '/images/asset_2.jpg' %>" alt="Avatar"
                                            class="w-9 h-9 sm:w-10 sm:h-10 rounded-full object-cover ring-2 ring-teal-500/50"
                                            loading="lazy" decoding="async">
                                        <span
                                            class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-teal-400 border-2 border-[#0f0f0f]"></span>
                                    </div>
                                    <div class="min-w-0">
                                        <p class="text-xs sm:text-sm font-semibold text-white truncate">@ridhopasii</p>
                                        <p class="text-[10px] sm:text-xs text-teal-400 font-medium">Online sekarang</p>
                                    </div>
                                </div>
                                <button onclick="document.getElementById('kontak').scrollIntoView({behavior:'smooth'})"
                                    class="flex-shrink-0 px-3 py-1.5 sm:px-4 sm:py-2 rounded-xl bg-teal-500 hover:bg-teal-400 active:scale-95 text-black text-[10px] sm:text-xs font-bold transition-all hover:shadow-lg hover:shadow-teal-500/30">
                                    Hubungi
                                </button>
                            </div>
                        </div>

                        <!-- Floating badge Full Stack — desktop only -->
                        <div class="absolute -top-3 -left-7 z-30 hidden lg:block">
                            <div
                                class="bg-[#0f0f0f]/90 backdrop-blur-xl border border-white/10 rounded-2xl px-3 py-2 shadow-xl flex items-center gap-2 hover:border-blue-500/30 transition-colors">
                                <div class="w-7 h-7 rounded-lg bg-blue-500/20 flex items-center justify-center">
                                    <i data-lucide="code-2" class="w-4 h-4 text-blue-400"></i>
                                </div>
                                <span class="text-xs font-semibold text-white">Full Stack</span>
                            </div>
                        </div>

                        <!-- Floating badge UI/UX — desktop only -->
                        <div class="absolute bottom-14 -right-7 z-30 hidden lg:block">
                            <div
                                class="bg-[#0f0f0f]/90 backdrop-blur-xl border border-white/10 rounded-2xl px-3 py-2 shadow-xl flex items-center gap-2 hover:border-purple-500/30 transition-colors">
                                <div class="w-7 h-7 rounded-lg bg-purple-500/20 flex items-center justify-center">
                                    <i data-lucide="palette" class="w-4 h-4 text-purple-400"></i>
                                </div>
                                <span class="text-xs font-semibold text-white">UI/UX</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Left Content (Teks) — di bawah card di mobile -->
                <div class="order-2 lg:order-1 text-center lg:text-left" data-aos="fade-right">

                    <!-- Pill badge -->
                    <div
                        class="inline-flex items-center gap-2 bg-white/5 border border-white/10 rounded-full px-4 py-1.5 mb-5 text-xs text-gray-400 font-medium">
                        <span class="w-1.5 h-1.5 rounded-full bg-teal-400 animate-pulse"></span>
                        Halo, Saya
                    </div>

                    <!-- Nama gradient -->
                    <h1 class="font-outfit font-black text-3xl sm:text-4xl md:text-5xl lg:text-6xl leading-[1.1] mb-3">
                        <span class="text-white">
                            <%= profile?.fullName?.split(' ')[0] || ' Ridho' %>
                        </span>
                        <br>
                        <span
                            class="bg-gradient-to-r from-teal-400 via-cyan-300 to-teal-500 bg-clip-text text-transparent">
                            <%= profile?.fullName?.split(' ').slice(1).join(' ') || ' Pasii' %>
                        </span>
                    </h1>

                    <!-- Title dengan garis dekoratif -->
                    <div class="flex items-center justify-center lg:justify-start gap-3 mb-5">
                        <div class="h-0.5 w-8 bg-gradient-to-r from-teal-500 to-transparent rounded-full"></div>
                        <p class="text-teal-400 font-semibold text-sm sm:text-base tracking-wide">
                            <%= profile?.title || 'Web Developer' %>
                        </p>
                    </div>

                    <!-- Typing text -->
                    <p
                        class="text-gray-400 text-sm sm:text-base lg:text-lg mb-7 max-w-md mx-auto lg:mx-0 leading-relaxed min-h-[3rem]">
                        <span id="typing-text" class="typing-text"></span>
                    </p>

                    <!-- Social links -->
                    <div class="flex items-center justify-center lg:justify-start gap-3 mb-7">
                        <% if (locals.socials) { %>
                            <% socials.forEach(social=> { %>
                                <a href="<%= social.url %>" target="_blank" class="social-icon">
                                    <i data-lucide="<%= social.icon %>" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                                </a>
                                <% }) %>
                                    <% } %>
                    </div>

                    <!-- CTA Buttons — full width di mobile -->
                    <div class="flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-3 sm:gap-4">
                        <a href="#proyek" class="w-full sm:w-auto btn-primary flex items-center justify-center gap-2">
                            <span>Lihat Proyek</span>
                            <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
                        </a>
                        <% if (profile?.cvLink) { %>
                            <a href="<%= profile.cvLink %>" target="_blank"
                                class="w-full sm:w-auto btn-outline flex items-center justify-center gap-2 border-teal-500/50 text-teal-400">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                <span>Download CV</span>
                            </a>
                            <% } %>
                                <a href="#kontak"
                                    class="w-full sm:w-auto btn-outline flex items-center justify-center gap-2">
                                    <span>Kontak Saya</span>
                                </a>
                    </div>

                    <!-- Stats mini -->
                    <div class="flex items-center justify-center lg:justify-start gap-6 mt-8 pt-6 border-t border-white/5"
                        data-aos="fade-up" data-aos-delay="200">
                        <div class="text-center lg:text-left">
                            <p class="font-outfit font-bold text-xl sm:text-2xl text-white">2+</p>
                            <p class="text-gray-500 text-[10px] sm:text-xs mt-0.5">Tahun Pengalaman</p>
                        </div>
                        <div class="w-px h-8 bg-white/10"></div>
                        <div class="text-center lg:text-left">
                            <p class="font-outfit font-bold text-xl sm:text-2xl text-white">20+</p>
                            <p class="text-gray-500 text-[10px] sm:text-xs mt-0.5">Proyek Selesai</p>
                        </div>
                        <div class="w-px h-8 bg-white/10"></div>
                        <div class="text-center lg:text-left">
                            <p class="font-outfit font-bold text-xl sm:text-2xl text-white">10+</p>
                            <p class="text-gray-500 text-[10px] sm:text-xs mt-0.5">Klien Puas</p>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Tech Stack Scrolling -->
            <div class="mt-16 sm:mt-24 pt-8 sm:pt-10 border-t border-white/5 relative" data-aos="fade-up">
                <p class="text-center text-gray-500 text-xs sm:text-sm mb-6 sm:mb-8 uppercase tracking-widest">Teknologi
                    yang saya gunakan</p>
                <div
                    class="flex flex-wrap justify-center gap-6 sm:gap-8 opacity-70 hover:opacity-100 transition-opacity">
                    <i data-lucide="code-2"
                        class="w-7 h-7 sm:w-8 sm:h-8 text-gray-400 hover:text-accent transition-colors"></i>
                    <i data-lucide="database"
                        class="w-7 h-7 sm:w-8 sm:h-8 text-gray-400 hover:text-blue-400 transition-colors"></i>
                    <i data-lucide="layout"
                        class="w-7 h-7 sm:w-8 sm:h-8 text-gray-400 hover:text-pink-400 transition-colors"></i>
                    <i data-lucide="server"
                        class="w-7 h-7 sm:w-8 sm:h-8 text-gray-400 hover:text-green-400 transition-colors"></i>
                    <i data-lucide="smartphone"
                        class="w-7 h-7 sm:w-8 sm:h-8 text-gray-400 hover:text-purple-400 transition-colors"></i>
                </div>
            </div>
        </div>
    </section>


    <!-- About Section -->
    <section id="tentang" class="py-24">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <!-- Section Header -->
            <div class="mb-12" data-aos="fade-up">
                <span class="text-gray-400 text-lg">Tentang</span>
                <h2 class="font-outfit font-bold text-4xl sm:text-5xl">
                    <span class="text-accent">Saya</span>
                </h2>
            </div>

            <p class="text-xl sm:text-2xl font-outfit font-medium text-white mb-8 max-w-3xl" data-aos="fade-up"
                data-aos-delay="100">
                <%= profile?.bio?.split('.')[0] || 'Perpaduan logika kode dan estetika desain.' %>.
            </p>

            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Left - Content -->
                <div class="space-y-6" data-aos="fade-right">
                    <p class="text-gray-400 leading-relaxed">
                        <%= profile?.bio || 'Perjalanan saya di dunia digital dimulai sejak bangku sekolah.' %>
                    </p>

                    <!-- Stats -->
                    <div class="flex gap-8 pt-6">
                        <div>
                            <div class="font-outfit font-bold text-3xl sm:text-4xl text-white">2+</div>
                            <div class="text-sm text-gray-500 mt-1">Tahun Pengalaman</div>
                        </div>
                        <div>
                            <div class="font-outfit font-bold text-3xl sm:text-4xl text-white">
                                <%= projects?.length || 0 %>+
                            </div>
                            <div class="text-sm text-gray-500 mt-1">Proyek Selesai</div>
                        </div>
                        <!-- Education/Experience Timeline simplified -->
                    </div>

                    <!-- Experience, Education & Achievements Tabs -->
                    <!-- Experience, Education & Achievements Tabs -->
                    <div class="mt-12 relative z-10">
                        <div class="inline-flex flex-wrap gap-1 bg-white/5 border border-white/10 rounded-2xl p-1 mb-6">
                            <button id="tab-experience" data-tab="experience"
                                class="tab-btn active px-4 py-2 rounded-xl text-sm font-medium bg-accent/20 text-accent transition-all">
                                Pengalaman
                            </button>
                            <button id="tab-education" data-tab="education"
                                class="tab-btn px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                                Pendidikan
                            </button>
                            <button id="tab-achievements" data-tab="achievements"
                                class="tab-btn px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                                Pencapaian
                            </button>
                            <button id="tab-organizations" data-tab="organizations"
                                class="tab-btn px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                                Organisasi
                            </button>
                            <button id="tab-skills" data-tab="skills"
                                class="tab-btn px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                                Keterampilan
                            </button>
                            <button id="tab-publications" data-tab="publications"
                                class="tab-btn px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                                Publikasi
                            </button>
                        </div>

                        <!-- Experience Content -->
                        <div id="content-experience" class="tab-content space-y-8 animate-fade-in block">
                            <% if (locals.experiences) { %>
                                <% experiences.forEach(exp=> { %>
                                    <div
                                        class="relative pl-8 border-l border-white/10 group hover:border-accent/50 transition-colors">
                                        <div
                                            class="absolute -left-1.5 top-1.5 w-3 h-3 rounded-full bg-accent/20 border border-accent group-hover:scale-110 transition-transform">
                                        </div>
                                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                                            <h4
                                                class="text-lg font-bold text-white group-hover:text-accent transition-colors">
                                                <%= exp.position %>
                                            </h4>
                                            <span
                                                class="text-sm text-accent bg-accent/10 px-3 py-1 rounded-full w-fit mt-2 sm:mt-0">
                                                <%= exp.period %>
                                            </span>
                                        </div>
                                        <p class="text-base text-gray-300 font-medium mb-2">
                                            <%= exp.company %>
                                        </p>
                                        <p class="text-sm text-gray-400 leading-relaxed">
                                            <%= exp.description || '' %>
                                        </p>
                                    </div>
                                    <% }) %>
                                        <% } %>
                        </div>

                        <!-- Education Content -->
                        <div id="content-education" class="tab-content hidden space-y-8 animate-fade-in">
                            <% if (locals.education) { %>
                                <% education.forEach(edu=> { %>
                                    <div
                                        class="relative pl-8 border-l border-white/10 group hover:border-accent/50 transition-colors">
                                        <div
                                            class="absolute -left-1.5 top-1.5 w-3 h-3 rounded-full bg-teal-500/20 border border-teal-500 group-hover:scale-110 transition-transform">
                                        </div>
                                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                                            <h4
                                                class="text-lg font-bold text-white group-hover:text-teal-400 transition-colors">
                                                <%= edu.institution %>
                                            </h4>
                                            <span
                                                class="text-sm text-teal-400 bg-teal-500/10 px-3 py-1 rounded-full w-fit mt-2 sm:mt-0">
                                                <%= edu.period %>
                                            </span>
                                        </div>
                                        <p class="text-base text-gray-300 font-medium mb-2">
                                            <%= edu.degree %>
                                        </p>
                                        <p class="text-sm text-gray-400">
                                            <%= edu.major %>
                                        </p>
                                    </div>
                                    <% }) %>
                                        <% } %>
                        </div>

                        <!-- Achievements Content -->
                        <div id="content-achievements" class="tab-content hidden space-y-6 animate-fade-in">
                            <% if (locals.awards && awards.length> 0) { %>
                                <% awards.forEach(a=> { %>
                                    <div
                                        class="bg-white/5 border border-white/10 rounded-xl p-5 hover:border-accent/30 transition-colors">
                                        <div class="flex items-start gap-4">
                                            <% if (a.certificateUrl) { %>
                                                <a href="<%= a.certificateUrl %>" target="_blank"
                                                    rel="noopener noreferrer" class="shrink-0">
                                                    <img src="<%= a.certificateUrl %>" alt="<%= a.title %>"
                                                        class="w-16 h-16 object-cover rounded-lg border border-white/10"
                                                        loading="lazy" decoding="async">
                                                </a>
                                                <% } else { %>
                                                    <div
                                                        class="w-16 h-16 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                                                        <i data-lucide="award" class="w-8 h-8 text-accent/50"></i>
                                                    </div>
                                                    <% } %>
                                                        <div>
                                                            <div class="flex flex-wrap items-center gap-2 mb-1">
                                                                <h3
                                                                    class="font-outfit font-semibold text-white text-base">
                                                                    <%= a.title %>
                                                                </h3>
                                                                <span
                                                                    class="text-xs text-accent bg-accent/10 px-2 py-0.5 rounded">
                                                                    <%= a.date %>
                                                                </span>
                                                            </div>
                                                            <p class="text-sm text-gray-400 mb-1">
                                                                <%= a.organizer %>
                                                            </p>
                                                            <% if (a.description) { %>
                                                                <p class="text-xs text-gray-500 line-clamp-2">
                                                                    <%= a.description %>
                                                                </p>
                                                                <% } %>
                                                        </div>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <p class="text-gray-500 italic">Belum ada pencapaian yang ditampilkan.</p>
                                            <% } %>
                        </div>

                        <!-- Organizations Content -->
                        <div id="content-organizations" class="tab-content hidden space-y-6 animate-fade-in">
                            <% if (locals.organizations && organizations.length> 0) { %>
                                <% organizations.forEach(org=> { %>
                                    <div class="bg-white/5 border border-white/10 rounded-xl p-5 hover:border-accent/30 transition-colors">
                                        <div class="flex items-start gap-4">
                                            <% if (org.logoUrl) { %>
                                                <img src="<%= org.logoUrl %>" alt="<%= org.name %>" class="w-12 h-12 rounded-lg object-cover border border-white/10" loading="lazy">
                                            <% } else { %>
                                                <div class="w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center">
                                                    <i data-lucide="users" class="w-6 h-6 text-accent/60"></i>
                                                </div>
                                            <% } %>
                                            <div>
                                                <div class="flex items-center gap-2 flex-wrap">
                                                    <h3 class="font-outfit font-semibold text-white"><%= org.name %></h3>
                                                    <span class="text-xs text-accent bg-accent/10 px-2 py-0.5 rounded"><%= org.period %></span>
                                                </div>
                                                <p class="text-sm text-gray-300 font-medium mt-1"><%= org.role %></p>
                                                <% if (org.description) { %>
                                                    <p class="text-sm text-gray-400 mt-1"><%= org.description %></p>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                                <div class="pt-2">
                                    <a href="/organizations" class="inline-flex items-center gap-2 text-accent">Lihat semua organisasi <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                                </div>
                            <% } else { %>
                                <p class="text-gray-500 italic">Belum ada organisasi yang ditampilkan.</p>
                            <% } %>
                        </div>

                        <!-- Skills Content -->
                        <div id="content-skills" class="tab-content hidden space-y-6 animate-fade-in">
                            <% const secList=['hardskill','softskill','bahasa']; %>
                            <% secList.forEach(sec => { const list = (skillCategories && skillCategories[sec]) || []; %>
                                <div>
                                    <div class="flex items-center gap-2 mb-3">
                                        <div class="w-2 h-2 rounded-full bg-accent"></div>
                                        <h4 class="font-semibold capitalize text-white"><%= sec %></h4>
                                    </div>
                                    <div class="grid sm:grid-cols-2 gap-3">
                                        <% list.slice(0,4).forEach(s => { %>
                                            <div class="bg-white/5 border border-white/10 rounded-xl p-4">
                                                <div class="flex items-center justify-between mb-2">
                                                    <div class="flex items-center gap-2">
                                                        <% if (s.icon && !s.icon.startsWith('/')) { %>
                                                            <i data-lucide="<%= s.icon %>" class="w-4 h-4 text-accent"></i>
                                                        <% } %>
                                                        <span class="text-sm font-medium"><%= s.name %></span>
                                                    </div>
                                                    <span class="text-xs text-accent"><%= s.percentage %>%</span>
                                                </div>
                                                <div class="h-1.5 bg-white/10 rounded-full overflow-hidden">
                                                    <div class="h-full bg-accent rounded-full" style="width: <%= s.percentage %>%"></div>
                                                </div>
                                            </div>
                                        <% }) %>
                                    </div>
                                </div>
                            <% }) %>
                            <div class="pt-2">
                                <a href="/skills" class="inline-flex items-center gap-2 text-accent">Lihat semua keterampilan <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                            </div>
                        </div>

                        <!-- Publications Content -->
                        <div id="content-publications" class="tab-content hidden space-y-6 animate-fade-in">
                            <% if (locals.publications && publications.length> 0) { %>
                                <% publications.slice(0,3).forEach(p=> { %>
                                    <div class="bg-white/5 border border-white/10 rounded-xl p-5 hover:border-accent/30 transition-colors">
                                        <div class="flex items-start gap-4">
                                            <% if (p.imageUrl) { %>
                                                <img src="<%= p.imageUrl %>" alt="<%= p.title %>" class="w-16 h-16 rounded-lg object-cover border border-white/10" loading="lazy">
                                            <% } %>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between gap-2">
                                                    <span class="text-xs text-accent bg-accent/10 px-2 py-0.5 rounded"><%= p.outlet %></span>
                                                    <span class="text-xs text-gray-400"><%= p.date %></span>
                                                </div>
                                                <h4 class="text-white font-semibold mt-1"><%= p.title %></h4>
                                                <% if (p.url) { %>
                                                    <a href="<%= p.url %>" target="_blank" class="inline-flex items-center gap-2 text-accent mt-1 text-sm">Baca <i data-lucide="arrow-up-right" class="w-4 h-4"></i></a>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                                <div class="pt-2">
                                    <a href="/publications" class="inline-flex items-center gap-2 text-accent">Lihat semua publikasi <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                                </div>
                            <% } else { %>
                                <p class="text-gray-500 italic">Belum ada publikasi yang ditampilkan.</p>
                            <% } %>
                        </div>
                    </div>

                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const tabs = document.querySelectorAll('.tab-btn');
                            const contents = document.querySelectorAll('.tab-content');

                            function switchTab(targetId) {
                                // 1. Update Buttons
                                tabs.forEach(btn => {
                                    if (btn.dataset.tab === targetId) {
                                        btn.classList.remove('text-gray-400', 'hover:text-white', 'hover:bg-white/5');
                                        btn.classList.add('bg-accent/20', 'text-accent', 'active');
                                    } else {
                                        btn.classList.remove('bg-accent/20', 'text-accent', 'active');
                                        btn.classList.add('text-gray-400', 'hover:text-white', 'hover:bg-white/5');
                                    }
                                });

                                // 2. Update Content
                                contents.forEach(content => {
                                    content.classList.add('hidden');
                                    content.style.display = ''; // Clean up inline styles
                                });

                                const activeContent = document.getElementById('content-' + targetId);
                                if (activeContent) {
                                    activeContent.classList.remove('hidden');
                                    // Trigger animation
                                    activeContent.style.animation = 'none';
                                    activeContent.offsetHeight; /* trigger reflow */
                                    activeContent.style.animation = null;
                                }
                            }

                            // Initialize event listeners
                            tabs.forEach(btn => {
                                btn.addEventListener('click', (e) => {
                                    e.preventDefault();
                                    const tabId = btn.dataset.tab;
                                    if (tabId) switchTab(tabId);
                                });
                            });
                        });
                    </script>
                    <% if (locals.realtimeEnabled) { %>
                        <script src="/socket.io/socket.io.js"></script>
                        <script>
                            (function () {
                                try {
                                    const socket = io({ transports: ['websocket', 'polling'] });
                                    console.log('[realtime] connecting...');
                                    socket.on('connect', () => console.log('[realtime] connected', socket.id));
                                    socket.on('disconnect', (reason) => console.warn('[realtime] disconnected:', reason));
                                    socket.on('connect_error', (err) => console.error('[realtime] error:', err.message));

                                    function escapeHtml(unsafe) {
                                        return String(unsafe)
                                            .replace(/&/g, "&amp;")
                                            .replace(/</g, "&lt;")
                                            .replace(/>/g, "&gt;")
                                            .replace(/"/g, "&quot;")
                                            .replace(/'/g, "&#039;");
                                    }

                                    function renderExperiences(exps) {
                                        const container = document.getElementById('content-experience');
                                        if (!container) return;
                                        if (!Array.isArray(exps) || exps.length === 0) {
                                            container.innerHTML = '<p class="text-gray-500">Belum ada pengalaman.</p>';
                                            return;
                                        }
                                        const html = exps.map(exp => {
                                            const position = escapeHtml(exp.position ?? '');
                                            const period = escapeHtml(exp.period ?? '');
                                            const company = escapeHtml(exp.company ?? '');
                                            const description = escapeHtml(exp.description ?? '');
                                            return `
                                        <div class="relative pl-8 border-l border-white/10 group hover:border-accent/50 transition-colors">
                                          <div class="absolute -left-1.5 top-1.5 w-3 h-3 rounded-full bg-accent/20 border border-accent group-hover:scale-110 transition-transform"></div>
                                          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                                            <h4 class="text-lg font-bold text-white group-hover:text-accent transition-colors">${position}</h4>
                                            <span class="text-sm text-accent bg-accent/10 px-3 py-1 rounded-full w-fit mt-2 sm:mt-0">${period}</span>
                                          </div>
                                          <p class="text-base text-gray-300 font-medium mb-2">${company}</p>
                                          <p class="text-sm text-gray-400 leading-relaxed">${description}</p>
                                        </div>`;
                                        }).join('');
                                        container.innerHTML = html;
                                    }

                                    socket.on('experience:update', (experiences) => {
                                        console.log('[realtime] experience:update', experiences?.length);
                                        try {
                                            renderExperiences(experiences || []);
                                        } catch (e) {
                                            console.error('[realtime] render error:', e);
                                        }
                                    });

                                    // Initial sync on load
                                    fetch('/api/experiences')
                                        .then(r => r.json())
                                        .then(data => {
                                            if (data && Array.isArray(data.experiences)) {
                                                console.log('[realtime] initial experiences', data.experiences.length);
                                                renderExperiences(data.experiences);
                                            }
                                        })
                                        .catch(err => console.error('[realtime] initial fetch error:', err));
                                } catch (e) {
                                    console.error('[realtime] init failed:', e);
                                }
                            })();
                        </script>
                        <% } %>

                            <!-- Download CV -->
                            <a href="<%= profile?.cvLink %>" target="_blank"
                                class="inline-flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-accent/30 rounded-xl transition-all mt-4">
                                <i data-lucide="download" class="w-5 h-5 text-accent"></i>
                                <span>Unduh CV</span>
                            </a>
                </div>

                <!-- Right - Tech Stack -->
                <div data-aos="fade-left">
                    <h3 class="font-outfit font-semibold text-lg mb-6">Kreativitas & Tech Stack</h3>

                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                        <% if (locals.skillCategories) { %>
                            <% Object.entries(skillCategories).forEach(([category, skills])=> { %>
                                <% skills.forEach(skill=> { %>
                                    <div class="tech-card">
                                        <div
                                            class="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center mb-3 text-accent">
                                            <!-- Simple icon placeholder based on name first letter if icon not mapped -->
                                            <span class="font-bold">
                                                <%= skill.name.charAt(0) %>
                                            </span>
                                        </div>
                                        <h4 class="font-medium text-sm">
                                            <%= skill.name %>
                                        </h4>
                                        <p class="text-xs text-gray-500 mt-0.5">
                                            <%= category %>
                                        </p>
                                        <div class="w-full bg-white/10 h-1 mt-2 rounded-full overflow-hidden">
                                            <div class="bg-accent h-full" style="width: <%= skill.percentage %>%"></div>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% }) %>
                                            <% } %>
                    </div>
                </div>
            </div>

    </section>

    <!-- Projects Section -->
    <section id="proyek" class="py-24">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <!-- Section Header -->
            <div class="mb-12" data-aos="fade-up">
                <span class="text-gray-400 text-lg">Proyek</span>
                <h2 class="font-outfit font-bold text-4xl sm:text-5xl">
                    <span class="text-accent">Terpilih</span>
                </h2>
                <p class="text-gray-400 mt-4">Beberapa karya yang menyoroti keahlian saya.</p>
            </div>

            <!-- Projects Grid -->
            <div class="grid md:grid-cols-2 gap-6">
                <% if (locals.projects) { %>
                    <% projects.forEach((project, index)=> { %>
                        <a href="/project/<%= project.slug %>" class="project-card group" data-aos="fade-up"
                            data-aos-delay="<%= index * 100 %>">
                            <div class="project-image flex items-center justify-center">
                                <% if (project.imageUrl) { %>
                                    <img src="<%= project.imageUrl %>" alt="<%= project.title %>"
                                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                        loading="lazy" decoding="async">
                                    <% } else { %>
                                        <i data-lucide="folder" class="w-20 h-20 text-accent/30"></i>
                                        <% } %>
                            </div>
                            <div class="p-6">
                                <h3
                                    class="font-outfit font-semibold text-xl mb-2 group-hover:text-accent transition-colors">
                                    <%= project.title %>
                                </h3>
                                <p class="text-gray-400 text-sm mb-4">
                                    <%= project.description %>
                                </p>
                                <div class="flex gap-2 flex-wrap">
                                    <% if (project.tags) { %>
                                        <% project.tags.split(',').forEach(tag=> { %>
                                            <span class="px-3 py-1 rounded-full bg-white/5 text-gray-300 text-xs">
                                                <%= tag.trim() %>
                                            </span>
                                            <% }) %>
                                                <% } %>
                                </div>
                            </div>
                            <div class="px-6 pb-6">
                                <span class="inline-flex items-center gap-2 text-accent text-sm font-medium">
                                    <span>Lihat</span>
                                    <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
                                </span>
                            </div>
                        </a>
                        <% }) %>
                            <% } %>
            </div>

            <!-- View All Button -->
            <div class="text-center mt-12">
                <button class="btn-outline">
                    <span>Lihat Semua Proyek</span>
                </button>
            </div>
        </div>
        </div>
    </section>

    <!-- Latest Articles (Static) -->
    <section id="blog" class="py-24 bg-white/5">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="mb-12 flex justify-between items-end" data-aos="fade-up">
                <div>
                    <span class="text-gray-400 text-lg">Artikel</span>
                    <h2 class="font-outfit font-bold text-4xl sm:text-5xl">
                        <span class="text-accent">Terbaru</span>
                    </h2>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <% if (locals.articles && articles.length> 0) { %>
                    <% articles.forEach((article, index)=> { %>
                        <a href="/blog/<%= article.slug %>"
                            class="group relative bg-black/20 border border-white/10 rounded-2xl overflow-hidden hover:border-accent/30 transition-all flex flex-col h-full"
                            data-aos="fade-up" data-aos-delay="<%= index * 100 %>">
                            <div class="h-48 overflow-hidden bg-gray-800 relative shrink-0">
                                <% if (article.imageUrl) { %>
                                    <% const _img=article.imageUrl.startsWith('http') ? ('https://images.weserv.nl/?url=' + encodeURIComponent(article.imageUrl)) : article.imageUrl; %>
                                    <img src="<%= _img %>" alt="<%= article.title %>"
                                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                        loading="lazy">
                                    <% } else { %>
                                        <div
                                            class="w-full h-full flex items-center justify-center bg-gray-800 text-gray-600">
                                            <i data-lucide="file-text" class="w-10 h-10"></i>
                                        </div>
                                        <% } %>
                                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent">
                                            </div>
                            </div>
                            <div class="p-6 flex flex-col flex-grow">
                                <div class="mb-3 flex flex-wrap gap-2">
                                    <% if (article.tags) { %>
                                        <% article.tags.split(' ,').slice(0, 2).forEach(tag=> { %>
                                        <span class="text-xs text-accent bg-accent/10 px-2 py-1 rounded inline-block">
                                            <%= tag.trim() %>
                                        </span>
                                        <% }) %>
                                            <% } %>
                            </div>
                            <h3
                                class="font-outfit font-bold text-xl text-white mb-2 group-hover:text-accent transition-colors line-clamp-2">
                                <%= article.title %>
                            </h3>
                            <div class="text-gray-400 text-sm mb-4 line-clamp-2 flex-grow prose prose-invert prose-sm">
                                <%- article.content.replace(/<[^>]*>?/gm, '').substring(0, 100) %>...
                            </div>
                            <time class="text-xs text-gray-500 mt-auto block">
                                <%= new Date(article.createdAt).toLocaleDateString('id-ID', { year: 'numeric' ,
                                    month: 'long' , day: 'numeric' }) %>
                            </time>
            </div>
            </a>
            <% }) %>
                <% } else { %>
                    <!-- Fallback / Empty State -->
                    <div class="col-span-full text-center py-12 border border-white/5 rounded-2xl bg-white/5">
                        <i data-lucide="pen-tool" class="w-12 h-12 text-gray-600 mx-auto mb-4"></i>
                        <h3 class="text-xl font-bold text-white mb-2">Belum ada artikel</h3>
                        <p class="text-gray-400">Nantikan tulisan-tulisan menarik di sini segera.</p>
                    </div>
                    <% } %>
        </div>
        </div>
    </section>


    <!-- Testimonials Section -->
    <section id="testimoni" class="py-24 bg-white/5">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="mb-12 text-center" data-aos="fade-up">
                <span class="text-gray-400 text-lg">Apa Kata</span>
                <h2 class="font-outfit font-bold text-4xl sm:text-5xl">
                    <span class="text-accent">Mereka</span>
                </h2>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <% if (locals.testimonials && testimonials.length> 0) { %>
                    <% testimonials.forEach((testi, index)=> { %>
                        <div class="bg-black/20 border border-white/10 p-6 rounded-2xl hover:border-accent/30 transition-colors"
                            data-aos="fade-up" data-aos-delay="<%= index * 100 %>">
                            <div class="flex items-center gap-4 mb-4">
                                <% if (testi.avatarUrl) { %>
                                    <img src="<%= testi.avatarUrl %>" alt="<%= testi.name %>"
                                        class="w-12 h-12 rounded-full object-cover border border-white/10"
                                        loading="lazy" decoding="async" width="48" height="48">
                                    <% } else { %>
                                        <div
                                            class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center text-gray-400">
                                            <i data-lucide="user" class="w-6 h-6"></i>
                                        </div>
                                        <% } %>
                                            <div>
                                                <h4 class="font-bold font-outfit text-white">
                                                    <%= testi.name %>
                                                </h4>
                                                <p class="text-sm text-accent">
                                                    <%= testi.role %>
                                                </p>
                                            </div>
                            </div>
                            <div class="mb-4">
                                <i data-lucide="quote" class="w-6 h-6 text-white/10 fill-current"></i>
                            </div>
                            <p class="text-gray-400 italic">"<%= testi.message %>"</p>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <div class="col-span-full text-center text-gray-500 italic">
                                    Belum ada testimoni ditampilkan.
                                </div>
                                <% } %>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="kontak" class="py-24">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <!-- Section Header -->
            <div class="mb-12" data-aos="fade-up">
                <span class="text-gray-400 text-lg">Mari</span>
                <h2 class="font-outfit font-bold text-4xl sm:text-5xl">
                    <span class="text-accent">Terhubung</span>
                </h2>
                <p class="text-gray-400 mt-4">Saya selalu terbuka untuk proyek baru atau sekadar obrolan. Kirimkan
                    sinyal Anda.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Left - Contact Info -->
                <div class="space-y-6" data-aos="fade-right">
                    <!-- Status -->
                    <div class="flex items-center gap-2 mb-6">
                        <span class="w-2 h-2 rounded-full bg-accent animate-pulse"></span>
                        <span class="font-mono text-sm text-accent">STATUS SISTEM: ONLINE</span>
                    </div>

                    <a href="mailto:<%= profile?.email %>" class="contact-card">
                        <div class="w-12 h-12 rounded-xl bg-accent/10 flex items-center justify-center">
                            <i data-lucide="mail" class="w-6 h-6 text-accent"></i>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">Email Saya</p>
                            <p class="font-medium">
                                <%= profile?.email %>
                            </p>
                        </div>
                    </a>

                    <a href="<%= profile?.whatsappUrl %>" target="_blank" class="contact-card">
                        <div class="w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center">
                            <i data-lucide="message-circle" class="w-6 h-6 text-green-400"></i>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">Chat WhatsApp</p>
                            <p class="font-medium">
                                <%= profile?.phone %>
                            </p>
                        </div>
                    </a>
                </div>

                <!-- Right - Contact Form -->
                <div class="p-8 rounded-2xl bg-white/[0.02] border border-white/5" data-aos="fade-left">
                    <form id="contactForm" class="space-y-6">
                        <div>
                            <label class="block text-sm text-gray-500 mb-2">ID Pengirim / Nama</label>
                            <input type="text" name="name" placeholder="Masukkan nama Anda" class="form-input" required>
                        </div>

                        <div>
                            <label class="block text-sm text-gray-500 mb-2">Email</label>
                            <input type="email" name="email" placeholder="email@example.com" class="form-input"
                                required>
                        </div>

                        <div>
                            <label class="block text-sm text-gray-500 mb-2">Subjek</label>
                            <input type="text" name="subject" placeholder="Subjek Pesan" class="form-input">
                        </div>

                        <div>
                            <label class="block text-sm text-gray-500 mb-2">Pesan</label>
                            <textarea name="message" rows="4" placeholder="Tulis pesan Anda..."
                                class="form-input resize-none" required></textarea>
                        </div>

                        <button type="submit"
                            class="w-full py-4 rounded-xl bg-accent hover:bg-accent-light text-primary font-semibold transition-all flex items-center justify-center gap-2">
                            <span>Kirim Pesan</span>
                            <i data-lucide="send" class="w-4 h-4"></i>
                        </button>
                        <p id="formStatus" class="text-center text-sm mt-2 hidden"></p>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="layanan" class="py-24 relative">
        <div class="absolute inset-0 bg-accent/5 skew-y-3 transform origin-top-left -z-10"></div>
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <span class="text-accent font-medium tracking-wider text-sm uppercase">Layanan</span>
                <h2 class="font-outfit font-bold text-3xl sm:text-4xl mt-2">Apa yang Saya Tawarkan?</h2>
                <div class="h-1 w-20 bg-accent mx-auto mt-4 rounded-full"></div>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <% if (locals.services && services.length> 0) { %>
                    <% services.forEach((service, index)=> { %>
                        <div class="group p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-accent/50 hover:bg-white/10 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(0,255,136,0.1)] relative overflow-hidden"
                            data-aos="fade-up" data-aos-delay="<%= index * 100 %>">
                            <div
                                class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <i data-lucide="arrow-up-right" class="w-5 h-5 text-accent"></i>
                            </div>
                            <div
                                class="w-14 h-14 rounded-xl bg-gradient-to-br from-teal-500/20 to-blue-500/20 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300">
                                <i data-lucide="<%= service.icon %>" class="w-7 h-7 text-accent"></i>
                            </div>
                            <h3 class="font-outfit font-bold text-xl mb-3 group-hover:text-accent transition-colors">
                                <%= service.title %>
                            </h3>
                            <p
                                class="text-gray-400 leading-relaxed text-sm group-hover:text-gray-300 transition-colors">
                                <%= service.description %>
                            </p>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <!-- Default Static Services if DB is empty -->
                                <div
                                    class="group p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-accent/50 hover:bg-white/10 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(0,255,136,0.1)] relative overflow-hidden">
                                    <div
                                        class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                        <i data-lucide="arrow-up-right" class="w-5 h-5 text-accent"></i>
                                    </div>
                                    <div
                                        class="w-14 h-14 rounded-xl bg-gradient-to-br from-teal-500/20 to-blue-500/20 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300">
                                        <i data-lucide="code" class="w-7 h-7 text-accent"></i>
                                    </div>
                                    <h3 class="font-outfit font-bold text-xl mb-3">Web Development</h3>
                                    <p class="text-gray-400 leading-relaxed text-sm">
                                        Membangun website modern, responsif, dan cepat menggunakan teknologi terbaru
                                        seperti Node.js & React.
                                    </p>
                                </div>
                                <div
                                    class="group p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-accent/30 hover:bg-white/10 transition-all duration-300 hover:-translate-y-2">
                                    <div
                                        class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                                        <i data-lucide="palette" class="w-7 h-7 text-purple-400"></i>
                                    </div>
                                    <h3 class="font-outfit font-bold text-xl mb-3">UI/UX Design</h3>
                                    <p class="text-gray-400 leading-relaxed text-sm">
                                        Merancang antarmuka pengguna yang intuitif dan menarik secara visual untuk
                                        meningkatkan pengalaman pengguna.
                                    </p>
                                </div>
                                <% } %>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('contactForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const form = this;
            const btn = form.querySelector('button[type="submit"]');
            const statusFn = document.getElementById('formStatus');
            const originalBtnText = btn.innerHTML;

            // Loading state
            btn.disabled = true;
            btn.innerHTML = '<span>Mengirim...</span>';
            statusFn.classList.add('hidden');
            statusFn.className = 'text-center text-sm mt-2 hidden';

            try {
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                const response = await fetch('/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                statusFn.textContent = result.message;
                statusFn.classList.remove('hidden');

                if (result.success) {
                    statusFn.classList.add('text-green-400');
                    form.reset();
                } else {
                    statusFn.classList.add('text-red-400');
                }
            } catch (error) {
                console.error(error);
                statusFn.textContent = 'Gagal mengirim pesan. Silakan coba lagi.';
                statusFn.classList.remove('hidden');
                statusFn.classList.add('text-red-400');
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
                lucide.createIcons();
            }
        });
    </script>
    </div>
    </div>
    </section>


    <%- include('partials/footer') %>
        ```
