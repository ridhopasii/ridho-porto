<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %> - Admin Panel
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style type="text/tailwindcss">
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: #0a0a0a;
            color: white;
        }

        .sidebar-link {
            @apply flex items-center gap-3 px-4 py-3 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-all;
        }

        .sidebar-link.active {
            @apply bg-teal-500/10 text-teal-400;
        }
    </style>
</head>

<body class="flex min-h-screen">
    <%- include('../partials/sidebar', { path: '/admin/services' }) %>

        <main class="flex-1 ml-64 p-8">
            <%- include('../partials/header', { title: locals.title }) %>

                <div class="max-w-2xl mx-auto">
                    <a href="/admin/services"
                        class="inline-flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        Back to Services
                    </a>

                    <div class="bg-white/5 border border-white/10 rounded-2xl p-8">
                        <h1 class="text-2xl font-bold font-outfit mb-6">
                            <%= title %>
                        </h1>

                        <% if (locals.error) { %>
                            <div class="bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl mb-6">
                                <%= error %>
                            </div>
                            <% } %>

                                <form
                                    action="/admin/services<%= service && service.id ? '/' + service.id + '/edit' : '/new' %>"
                                    method="POST" class="space-y-6">
                                    <!-- Title & Order -->
                                    <div class="grid grid-cols-4 gap-6">
                                        <div class="col-span-3">
                                            <label class="block text-sm text-gray-400 mb-2">Service Title</label>
                                            <input type="text" name="title" value="<%= service ? service.title : '' %>"
                                                required
                                                class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500 transition-colors text-white"
                                                placeholder="e.g. Web Development">
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-400 mb-2">Order</label>
                                            <input type="number" name="order" value="<%= service ? service.order : 0 %>"
                                                class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500 transition-colors text-white">
                                        </div>
                                    </div>

                                    <!-- Icon Picker -->
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-2">
                                            Icon (Lucide Name)
                                            <a href="https://lucide.dev/icons" target="_blank"
                                                class="text-teal-400 text-xs hover:underline ml-1">Browse Icons â†—</a>
                                        </label>
                                        <div class="flex gap-4">
                                            <input type="text" name="icon" id="iconInput"
                                                value="<%= service ? service.icon : 'code' %>" required
                                                class="flex-1 bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500 transition-colors text-white"
                                                placeholder="e.g. code, layout, server, smartphone"
                                                oninput="updateIconPreview()">

                                            <div class="w-12 h-12 rounded-lg bg-teal-500/10 border border-teal-500/20 flex items-center justify-center text-teal-400"
                                                id="iconPreview">
                                                <i data-lucide="<%= service ? service.icon : 'code' %>"></i>
                                            </div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-2">Type an icon name to see the preview.</p>
                                    </div>

                                    <!-- Description -->
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-2">Description</label>
                                        <textarea name="description" rows="4" required
                                            class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500 transition-colors text-white"
                                            placeholder="Briefly describe what this service entails..."><%= service ? service.description : '' %></textarea>
                                    </div>

                                    <div class="pt-4 border-t border-white/10 flex gap-4">
                                        <button type="submit"
                                            class="flex-1 bg-teal-500 hover:bg-teal-600 text-black font-bold py-3 rounded-lg transition-colors transform hover:scale-[1.01]">
                                            <%= service ? 'Update Service' : 'Create Service' %>
                                        </button>
                                        <% if (service && service.id) { %>
                                            <a href="/admin/services"
                                                class="px-6 py-3 rounded-lg border border-white/10 hover:bg-white/5 text-center transition-colors">
                                                Cancel
                                            </a>
                                            <% } %>
                                    </div>
                                </form>
                    </div>
                </div>
        </main>

        <script>
            function updateIconPreview() {
                const iconName = document.getElementById('iconInput').value.trim() || 'help-circle';
                const preview = document.getElementById('iconPreview');

                // Update preview HTML
                preview.innerHTML = `<i data-lucide="${iconName}"></i>`;

                // Re-render icons
                lucide.createIcons();
            }
            lucide.createIcons();
        </script>
</body>

</html>